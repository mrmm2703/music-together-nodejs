"use strict";function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function _createClass(o,e,n){return e&&_defineProperties(o.prototype,e),n&&_defineProperties(o,n),o}var db_config=require("./db_config"),mysql=require("mysql"),DatabasePool=function(){function o(){_classCallCheck(this,o),this.pool=mysql.createPool({connectionLimit:100,host:db_config.host,user:db_config.username,password:db_config.password,database:db_config.database,charset:"utf8mb4"})}return _createClass(o,[{key:"insertGroupLog",value:function(n,a,r){var o=mysql.format("INSERT INTO groupLogs (glogSpotifyID, glogGroupID, glogAction) VALUES (?,?,?)",[n,a,r]);this.pool.query(o,function(o,e){o?(console.error("DatabasePool::insertGroupLog(".concat(n,", ").concat(a,", ").concat(r,")")),console.error(o)):console.log("DatabasePool::insertGroupLog(".concat(n,", ").concat(a,", ").concat(r,") - SUCCESS"))})}},{key:"updateUserGroupId",value:function(n,a){var o=mysql.format("UPDATE users SET userGroupID=? WHERE userSpotifyID=?",[a,n]);this.pool.query(o,function(o,e){o?(console.error("DatabasePool::updateUserGroupId(".concat(n,", ").concat(a,")")),console.error(o)):console.log("DatabasePool::updateUserGroupId(".concat(n,", ").concat(a,") - SUCCESS"))})}},{key:"getBannedWords",value:function(){var a=[];return this.pool.query("SELECT word FROM bannedWords",function(o,e){if(o)console.log("DatabasePool::getBannedWords()"),console.log(o);else{console.log("DatabasePool::getBannedWords() - SUCCESS");for(var n=0;n<e.length;n++)a.push(e[n].word)}}),a}},{key:"logBannedWord",value:function(n,a,r,s){var c,t=this,l="INSERT INTO messages (msgSenderID, msgContent, msgGroupID) VALUES (?,?,?)",d=mysql.format(l,[a,s,r]);this.pool.query(d,function(o,e){o?(console.log("DatabasePool::logBannedWord[msg](".concat(s,", ").concat(a,", ").concat(r,")")),console.log(o)):(console.log("DatabasePool::logBannedWord[msg](".concat(s,", ").concat(a,", ").concat(r,") - SUCCESS")),console.log(e.insertId),c=e.insertId,l="INSERT INTO bannedWordsUse (banUsgWordID, banUsgSenderID, banUsgGroupID, banUsgMsgID) VALUES ((SELECT wordID FROM bannedWords WHERE word=?), ?, ?, ?)",d=mysql.format(l,[n,a,r,c]),t.pool.query(d,function(o,e){o?(console.error("DatabasePool::logBannedWord(".concat(n,", ").concat(a,", ").concat(r,", ").concat(c,")")),console.error(o)):console.error("DatabasePool::logBannedWord(".concat(n,", ").concat(a,", ").concat(r,", ").concat(c,") - SUCCESS"))}))}),l="UPDATE bannedWords SET wordUses = wordUses + 1 WHERE word=?",d=mysql.format(l,[n]),this.pool.query(d,function(o,e){o?(console.error("DatabasePool::logBannedWord(".concat(n,", ").concat(a,", ").concat(r,")")),console.error(o)):console.error("DatabasePool::logBannedWord(".concat(n,", ").concat(a,", ").concat(r,") - SUCCESS"))})}},{key:"logMessage",value:function(n,a,r){var o=mysql.format("INSERT INTO messages (msgSenderID, msgContent, msgGroupID) VALUES (?,?,?)",[a,n,r]),s="poop";return this.pool.query(o,function(o,e){o?(console.log("DatabasePool::logMessage(".concat(n,", ").concat(a,", ").concat(r,")")),console.log(o)):(console.log("DatabasePool::logMessage(".concat(n,", ").concat(a,", ").concat(r,") - SUCCESS")),console.log(e.insertId),s=e.insertId)}),s}}]),o}();module.exports=DatabasePool;